import{aQ as de,S as Z,aR as fe,f as O,j as z,aS as _e,g as J,i as ve,k as ge,aT as he,aU as K,aV as me,aW as pe,aX as xe,aY as ae,aZ as be,a_ as ye,a$ as we,b0 as Ae,aa as B,w as P,D as u,E as d,Z as Re,a2 as i,H as m,x as I,aP as re,G as N,P as $,aM as L,a0 as x,a1 as M,O as y,W as T,$ as E,a7 as $e,a8 as Te,v as C,X as W,b1 as q,b2 as Ee}from"./index-4a743c95.js";import{a as ie,_ as Pe}from"./index-e48d1091.js";import{U as k,d as V,c as j,S as G,e as Oe,_ as Le}from"./BaseButton-0678020d.js";import"./base-71edb393.js";import"./el-input-19d7eca5.js";var Ie="__lodash_hash_undefined__";function De(e){return this.__data__.set(e,Ie),this}function Se(e){return this.__data__.has(e)}function U(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new de;++t<n;)this.add(e[t])}U.prototype.add=U.prototype.push=De;U.prototype.has=Se;function Ce(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}function Fe(e,t){return e.has(t)}var Ne=1,Ge=2;function le(e,t,n,s,a,r){var o=n&Ne,c=e.length,_=t.length;if(c!=_&&!(o&&_>c))return!1;var v=r.get(e),h=r.get(t);if(v&&h)return v==t&&h==e;var g=-1,f=!0,b=n&Ge?new U:void 0;for(r.set(e,t),r.set(t,e);++g<c;){var l=e[g],p=t[g];if(s)var w=o?s(p,l,g,t,e,r):s(l,p,g,e,t,r);if(w!==void 0){if(w)continue;f=!1;break}if(b){if(!Ce(t,function(A,R){if(!Fe(b,R)&&(l===A||a(l,A,n,s,r)))return b.push(R)})){f=!1;break}}else if(!(l===p||a(l,p,n,s,r))){f=!1;break}}return r.delete(e),r.delete(t),f}function Me(e){var t=-1,n=Array(e.size);return e.forEach(function(s,a){n[++t]=[a,s]}),n}function Ue(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var Be=1,qe=2,He="[object Boolean]",Ke="[object Date]",Qe="[object Error]",Ye="[object Map]",Xe="[object Number]",Ze="[object RegExp]",ze="[object Set]",Je="[object String]",We="[object Symbol]",ke="[object ArrayBuffer]",Ve="[object DataView]",ee=Z?Z.prototype:void 0,H=ee?ee.valueOf:void 0;function je(e,t,n,s,a,r,o){switch(n){case Ve:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ke:return!(e.byteLength!=t.byteLength||!r(new k(e),new k(t)));case He:case Ke:case Xe:return fe(+e,+t);case Qe:return e.name==t.name&&e.message==t.message;case Ze:case Je:return e==t+"";case Ye:var c=Me;case ze:var _=s&Be;if(c||(c=Ue),e.size!=t.size&&!_)return!1;var v=o.get(e);if(v)return v==t;s|=qe,o.set(e,t);var h=le(c(e),c(t),s,a,r,o);return o.delete(e),h;case We:if(H)return H.call(e)==H.call(t)}return!1}var et=1,tt=Object.prototype,nt=tt.hasOwnProperty;function st(e,t,n,s,a,r){var o=n&et,c=V(e),_=c.length,v=V(t),h=v.length;if(_!=h&&!o)return!1;for(var g=_;g--;){var f=c[g];if(!(o?f in t:nt.call(t,f)))return!1}var b=r.get(e),l=r.get(t);if(b&&l)return b==t&&l==e;var p=!0;r.set(e,t),r.set(t,e);for(var w=o;++g<_;){f=c[g];var A=e[f],R=t[f];if(s)var X=o?s(R,A,f,t,e,r):s(A,R,f,e,t,r);if(!(X===void 0?A===R||a(A,R,n,s,r):X)){p=!1;break}w||(w=f=="constructor")}if(p&&!w){var D=e.constructor,S=t.constructor;D!=S&&"constructor"in e&&"constructor"in t&&!(typeof D=="function"&&D instanceof D&&typeof S=="function"&&S instanceof S)&&(p=!1)}return r.delete(e),r.delete(t),p}var at=1,te="[object Arguments]",ne="[object Array]",F="[object Object]",rt=Object.prototype,se=rt.hasOwnProperty;function it(e,t,n,s,a,r){var o=O(e),c=O(t),_=o?ne:j(e),v=c?ne:j(t);_=_==te?F:_,v=v==te?F:v;var h=_==F,g=v==F,f=_==v;if(f&&z(e)){if(!z(t))return!1;o=!0,h=!1}if(f&&!h)return r||(r=new G),o||_e(e)?le(e,t,n,s,a,r):je(e,t,_,n,s,a,r);if(!(n&at)){var b=h&&se.call(e,"__wrapped__"),l=g&&se.call(t,"__wrapped__");if(b||l){var p=b?e.value():e,w=l?t.value():t;return r||(r=new G),a(p,w,n,s,r)}}return f?(r||(r=new G),st(e,t,n,s,a,r)):!1}function Q(e,t,n,s,a){return e===t?!0:e==null||t==null||!J(e)&&!J(t)?e!==e&&t!==t:it(e,t,n,s,Q,a)}var lt=1,ot=2;function ct(e,t,n,s){var a=n.length,r=a,o=!s;if(e==null)return!r;for(e=Object(e);a--;){var c=n[a];if(o&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<r;){c=n[a];var _=c[0],v=e[_],h=c[1];if(o&&c[2]){if(v===void 0&&!(_ in e))return!1}else{var g=new G;if(s)var f=s(v,h,_,e,t,g);if(!(f===void 0?Q(h,v,lt|ot,s,g):f))return!1}}return!0}function oe(e){return e===e&&!ve(e)}function ut(e){for(var t=ge(e),n=t.length;n--;){var s=t[n],a=e[s];t[n]=[s,a,oe(a)]}return t}function ce(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function dt(e){var t=ut(e);return t.length==1&&t[0][2]?ce(t[0][0],t[0][1]):function(n){return n===e||ct(n,e,t)}}function ft(e,t){return e!=null&&t in Object(e)}function _t(e,t,n){t=he(t,e);for(var s=-1,a=t.length,r=!1;++s<a;){var o=K(t[s]);if(!(r=e!=null&&n(e,o)))break;e=e[o]}return r||++s!=a?r:(a=e==null?0:e.length,!!a&&me(a)&&pe(o,a)&&(O(e)||xe(e)))}function vt(e,t){return e!=null&&_t(e,t,ft)}var gt=1,ht=2;function mt(e,t){return ae(e)&&oe(t)?ce(K(e),t):function(n){var s=be(n,e);return s===void 0&&s===t?vt(n,e):Q(t,s,gt|ht)}}function pt(e){return function(t){return t==null?void 0:t[e]}}function xt(e){return function(t){return ye(t,e)}}function bt(e){return ae(e)?pt(K(e)):xt(e)}function yt(e){return typeof e=="function"?e:e==null?we:typeof e=="object"?O(e)?mt(e[0],e[1]):dt(e):bt(e)}function wt(e,t){var n=[];return Ae(e,function(s,a,r){t(s,a,r)&&n.push(s)}),n}function At(e,t){var n=O(e)?Oe:wt;return n(e,yt(t))}const Rt={class:"square-icon"},$t=["href","fill"],Tt={__name:"BaseIcon",props:{name:{type:String,default:"icon",required:!0},size:{type:String,default:"16",required:!1},color:{type:String,default:"#000",required:!1}},setup(e){const t=e,n=P(()=>`#icon-${t.name}`);return(s,a)=>(u(),d("span",Rt,[(u(),d("svg",{"aria-hidden":"true",class:"svg-icon",style:Re({width:e.size,height:e.size})},[i("use",{href:m(n),fill:e.color},null,8,$t)],4))]))}},ue=B(Tt,[["__scopeId","data-v-0d62aa47"]]),Et={key:0,class:"thumb-conversation mr-[10px] h-12 w-12"},Pt=["src"],Ot={key:1,class:"h-full w-full"},Lt=["src"],It={key:0,class:"avatar"},Dt={class:"text-xs font-medium text-description"},St=["src"],Ct=I({__name:"ThumbConversation",props:{conversation:{default:()=>({})}},setup(e){const t=e,{user:n}=re(ie),s=P(()=>t.conversation.conversationType==="DM"?At(t.conversation.members,o=>o._id!==n.value._id)[0].avatar:""),a=r=>t.conversation.members[r-1].avatar;return(r,o)=>e.conversation._id?(u(),d("div",Et,[e.conversation.conversationType==="GROUP"?(u(),d("div",{key:0,class:N(["h-full w-full",e.conversation.members.length>3?"group-four":"group-three"])},[e.conversation.conversationThumb?(u(),d("img",{key:0,src:e.conversation.conversationThumb,alt:"",class:"h-full w-full rounded-full object-cover"},null,8,Pt)):(u(),d("div",Ot,[(u(),d($,null,L(3,c=>i("div",{key:c,class:"avatar"},[i("img",{src:a(c),alt:"",class:"rounded-full object-cover"},null,8,Lt)])),64)),e.conversation.members.length>3?(u(),d("div",It,[i("span",Dt,x(e.conversation.members.length),1)])):M("",!0)]))],2)):(u(),d("img",{key:1,src:m(s),alt:"",class:"h-full w-full rounded-full object-cover"},null,8,St))])):M("",!0)}});const Ft=B(Ct,[["__scopeId","data-v-eb205a4c"]]),Nt={class:"bg-white mx-4 rounded-md"},Gt={key:0,class:"w-full"},Mt=["src"],Ut={class:"ml-3 text-base font-medium"},Bt={key:1},qt={class:"ml-3"},Ht={class:"text-base font-medium"},Kt={class:"text-[13px] mt-1 text-[#7589a3] hover:underline hover:decoration-hyperlink hover:text-hyperlink"},Qt=I({__name:"ListContact",props:{data:{default:()=>[]},tab:null},setup(e){return(t,n)=>{const s=Ft;return u(),d("div",Nt,[e.tab==="FRIEND"?(u(),d("div",Gt,[(u(!0),d($,null,L(e.data,a=>(u(),d("div",{key:a._id,class:"user h-18 flex items-center px-4 cursor-pointer hover:bg-background-hover"},[i("img",{src:a.avatar,alt:"",class:"w-12 h-12 rounded-full object-cover"},null,8,Mt),i("p",Ut,x(a.fullName),1)]))),128))])):M("",!0),e.tab==="GROUP"?(u(),d("div",Bt,[(u(!0),d($,null,L(e.data,a=>(u(),d("div",{key:a._id,class:"conversation h-18 flex items-center px-4 cursor-pointer hover:bg-background-hover"},[y(s,{conversation:a},null,8,["conversation"]),i("div",qt,[i("p",Ht,x(a.conversationName),1),i("p",Kt,x(a.members.length)+" thành viên ",1)])]))),128))])):M("",!0)])}}});const Yt=B(Qt,[["__scopeId","data-v-868d458a"]]);function Xt(e){if(!e)return"";const t=new Date(e);return(t.getDate()<10?"0"+t.getDate():t.getDate())+"/"+(t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1)+"/"+t.getFullYear()}const Zt={class:"grid grid-cols-3 gap-[10px] mx-4"},zt={class:"flex items-center"},Jt=["src"],Wt={class:"flex flex-col ml-2"},kt={class:"text-base mb-[2px] font-medium"},Vt={class:"text-[13px] text-[#7589a3]"},jt={class:"mt-[17px] mb-4 h-12 p-2 border border-solid border-[#d8dbdf] rounded bg-[#f9fafb] overflow-y-auto"},en={class:"mr-2 text-sm break-words"},tn={class:"flex justify-between"},nn={class:"px-4 h-16 flex items-center text-sm font-medium"},sn={class:"grid grid-cols-3 gap-[10px] mx-4"},an={class:"flex items-center"},rn=["src"],ln={class:"flex flex-col ml-2"},on={class:"text-base mb-[2px] font-medium"},cn=i("p",{class:"text-[13px] text-[#7589a3]"},"Có thể bạn quen",-1),un={class:"flex justify-between mt-[17px]"},dn=I({__name:"InvitationReceived",props:{data:{default:()=>[]},listSuggestFriend:{default:()=>[]}},setup(e){return(t,n)=>{const s=Le;return u(),d($,null,[i("div",Zt,[(u(!0),d($,null,L(e.data,a=>(u(),d("div",{key:a._id,class:"h-[216px] bg-white rounded-md p-4 cursor-pointer shadow-sm"},[i("div",zt,[i("img",{src:a.fromId.avatar,alt:"avatar",class:"w-12 h-12 rounded-full object-cover"},null,8,Jt),i("div",Wt,[i("p",kt,x(a.fromId.fullName),1),i("p",Vt,x(m(Xt)(a.createdAt)),1)])]),i("div",jt,[i("p",en,x(a.message),1)]),i("div",tn,[y(s,{class:"flex-1 mr-2",type:"neutral"},{default:T(()=>[E("Từ chối")]),_:1}),y(s,{type:"secondary",class:"flex-1"},{default:T(()=>[E("Đồng ý")]),_:1})])]))),128))]),i("div",nn,"Gợi ý kết bạn ("+x(e.listSuggestFriend.length)+")",1),i("div",sn,[(u(!0),d($,null,L(e.listSuggestFriend,a=>(u(),d("div",{key:a._id,class:"h-[138px] bg-white rounded-md p-4 cursor-pointer shadow-sm"},[i("div",an,[i("img",{src:a.avatar,alt:"avatar",class:"w-12 h-12 rounded-full object-cover"},null,8,rn),i("div",ln,[i("p",on,x(a.fullName),1),cn])]),i("div",un,[y(s,{class:"flex-1 mr-2",type:"neutral"},{default:T(()=>[E("Bỏ qua")]),_:1}),y(s,{type:"neutral",class:"flex-1"},{default:T(()=>[E("Kết bạn")]),_:1})])]))),128))])],64)}}}),Y=e=>($e("data-v-7495080e"),e=e(),Te(),e),fn=Y(()=>i("p",{class:"ml-[14px] text-base font-medium"},"Danh sách bạn bè",-1)),_n=Y(()=>i("p",{class:"ml-[14px] text-base font-medium"},"Danh sách nhóm",-1)),vn=Y(()=>i("p",{class:"ml-[14px] text-base font-medium"},"Lời mời kết bạn",-1)),gn=I({__name:"NavContact",props:{tabActive:null},emits:["change"],setup(e,{emit:t}){return(n,s)=>{const a=ue;return u(),d($,null,[i("div",{class:N(["h-14 px-4 flex items-center cursor-pointer hover:bg-background-hover",{"bg-background-selected":e.tabActive==="FRIEND"}]),onClick:s[0]||(s[0]=r=>t("change","FRIEND"))},[y(a,{name:"user",size:"24"}),fn],2),i("div",{class:N(["h-14 px-4 flex items-center cursor-pointer hover:bg-background-hover",{"bg-background-selected":e.tabActive==="GROUP"}]),onClick:s[1]||(s[1]=r=>t("change","GROUP"))},[y(a,{name:"user-three",size:"24"}),_n],2),i("div",{class:N(["h-14 px-4 flex items-center cursor-pointer hover:bg-background-hover",{"bg-background-selected":e.tabActive==="REQUEST"}]),onClick:s[2]||(s[2]=r=>t("change","REQUEST"))},[y(a,{name:"letter",size:"24"}),vn],2)],64)}}});const hn=B(gn,[["__scopeId","data-v-7495080e"]]),mn={class:"flex w-full"},pn={class:"w-full bg-[#f7f7f8]"},xn={class:"h-16 text-base font-medium px-[19px] border-b border-solid bg-white border-[#c5c9ce] flex items-center"},bn={class:"px-4 h-16 flex items-center text-sm font-medium"},Tn=I({__name:"ContactView",setup(e){const{user:t}=re(ie),n=C("FRIEND"),s=C([]),a=C([]),r=C(0),o=P(()=>n.value==="FRIEND"?"Danh sách bạn bè":n.value==="GROUP"?"Danh sách nhóm":"Lời mời kết bạn"),c=P(()=>n.value==="FRIEND"?"user":n.value==="GROUP"?"user-three":"letter"),_=P(()=>n.value==="FRIEND"?"Bạn bè":n.value==="GROUP"?"Nhóm":"Lời mời đã nhận"),v=async()=>{try{const l=await q.getListFriend(t.value._id);s.value=l.content,r.value=l.total}catch{s.value=[],r.value=0}};v();const h=async()=>{try{const l=await Ee.getListChatGroup(t.value._id);s.value=l.content,r.value=l.total}catch{s.value=[],r.value=0}},g=async()=>{try{const l=await q.getListRequestFriend();s.value=l.content,r.value=l.total}catch{s.value=[],r.value=0}},f=async()=>{try{const l=await q.getListSuggestFriend();a.value=l.content}catch{a.value=[]}},b=async l=>{l==="FRIEND"?await v():l==="GROUP"?await h():await Promise.all([g(),f()]),n.value=l};return(l,p)=>{const w=Pe,A=ue;return u(),d("div",mn,[y(w,null,{default:T(()=>[y(hn,{"tab-active":m(n),onChange:b},null,8,["tab-active"])]),_:1}),i("div",pn,[i("div",xn,[y(A,{name:m(c),size:"24",class:"mr-[11px]"},null,8,["name"]),E(" "+x(m(o)),1)]),i("div",bn,x(m(_))+" ("+x(m(r))+")",1),m(n)!=="REQUEST"?(u(),W(Yt,{key:0,data:m(s),tab:m(n)},null,8,["data","tab"])):(u(),W(dn,{key:1,data:m(s),"list-suggest-friend":m(a)},null,8,["data","list-suggest-friend"]))])])}}});export{Tn as default};
